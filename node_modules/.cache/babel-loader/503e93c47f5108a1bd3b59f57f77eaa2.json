{"remainingRequest":"/Users/mehul/Meetuper/node_modules/babel-loader/lib/index.js!/Users/mehul/Meetuper/node_modules/eslint-loader/index.js??ref--13-0!/Users/mehul/Meetuper/src/store/modules/meetups.js","dependencies":[{"path":"/Users/mehul/Meetuper/src/store/modules/meetups.js","mtime":1555782489846},{"path":"/Users/mehul/Meetuper/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mehul/Meetuper/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mehul/Meetuper/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find-index\";\nimport _toConsumableArray from \"/Users/mehul/Meetuper/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport Vue from 'vue';\nimport axios from 'axios';\nimport axiosInstance from '@/services/axios';\nexport default {\n  namespaced: true,\n  state: {\n    items: [],\n    item: {}\n  },\n  actions: {\n    fetchMeetups: function fetchMeetups(_ref) {\n      var state = _ref.state,\n          commit = _ref.commit;\n      commit('setItems', {\n        resource: 'meetups',\n        items: []\n      }, {\n        root: true\n      });\n      return axios.get('/api/v1/meetups').then(function (res) {\n        var meetups = res.data;\n        commit('setItems', {\n          resource: 'meetups',\n          items: meetups\n        }, {\n          root: true\n        });\n        return state.items;\n      });\n    },\n    fetchMeetupById: function fetchMeetupById(_ref2, meetupId) {\n      var state = _ref2.state,\n          commit = _ref2.commit;\n      commit('setItem', {\n        resource: 'meetups',\n        item: {}\n      }, {\n        root: true\n      });\n      return axios.get(\"/api/v1/meetups/\".concat(meetupId)).then(function (res) {\n        var meetup = res.data;\n        commit('setItem', {\n          resource: 'meetups',\n          item: meetup\n        }, {\n          root: true\n        });\n        return state.item;\n      });\n    },\n    createMeetup: function createMeetup(_ref3, meetupToCreate) {\n      var rootState = _ref3.rootState;\n      meetupToCreate.meetupCreator = rootState.auth.user;\n      meetupToCreate.processedLocation = meetupToCreate.location.toLowerCase().replace(/[\\s,]+/g, '').trim();\n      return axiosInstance.post('/api/v1/meetups', meetupToCreate).then(function (res) {\n        return res.data;\n      });\n    },\n    joinMeetup: function joinMeetup(_ref4, meetupId) {\n      var state = _ref4.state,\n          rootState = _ref4.rootState,\n          commit = _ref4.commit,\n          dispatch = _ref4.dispatch;\n      var user = rootState.auth.user;\n      return axiosInstance.post(\"/api/v1/meetups/\".concat(meetupId, \"/join\")).then(function () {\n        dispatch('auth/addMeetupToAuthUser', meetupId, {\n          root: true\n        });\n        var joinedPeople = state.item.joinedPeople;\n        commit('addUsersToMeetup', [].concat(_toConsumableArray(joinedPeople), [user]));\n        return true;\n      });\n    },\n    leaveMeetup: function leaveMeetup(_ref5, meetupId) {\n      var state = _ref5.state,\n          rootState = _ref5.rootState,\n          commit = _ref5.commit,\n          dispatch = _ref5.dispatch;\n      var user = rootState.auth.user;\n      return axiosInstance.post(\"/api/v1/meetups/\".concat(meetupId, \"/leave\")).then(function () {\n        dispatch('auth/removeMeetupFromAuthUser', meetupId, {\n          root: true\n        });\n        var joinedPeople = state.item.joinedPeople;\n        var index = joinedPeople.findIndex(function (jUser) {\n          return jUser._id === user._id;\n        });\n        joinedPeople.splice(index, 1);\n        commit('addUsersToMeetup', joinedPeople);\n      });\n    }\n  },\n  mutations: {\n    addUsersToMeetup: function addUsersToMeetup(state, joinedPeople) {\n      Vue.set(state.item, 'joinedPeople', joinedPeople);\n    }\n  }\n};",{"version":3,"sources":["/Users/mehul/Meetuper/src/store/modules/meetups.js"],"names":["Vue","axios","axiosInstance","namespaced","state","items","item","actions","fetchMeetups","commit","resource","root","get","then","res","meetups","data","fetchMeetupById","meetupId","meetup","createMeetup","meetupToCreate","rootState","meetupCreator","auth","user","processedLocation","location","toLowerCase","replace","trim","post","joinMeetup","dispatch","joinedPeople","leaveMeetup","index","findIndex","jUser","_id","splice","mutations","addUsersToMeetup","set"],"mappings":";;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,aAAP,MAA0B,kBAA1B;AACA,eAAe;AACXC,EAAAA,UAAU,EAAE,IADD;AAGXC,EAAAA,KAAK,EAAE;AACHC,IAAAA,KAAK,EAAE,EADJ;AAEHC,IAAAA,IAAI,EAAE;AAFH,GAHI;AAQXC,EAAAA,OAAO,EAAE;AACLC,IAAAA,YADK,8BAC2B;AAAA,UAAjBJ,KAAiB,QAAjBA,KAAiB;AAAA,UAAVK,MAAU,QAAVA,MAAU;AAC5BA,MAAAA,MAAM,CAAC,UAAD,EAAa;AAAEC,QAAAA,QAAQ,EAAE,SAAZ;AAAuBL,QAAAA,KAAK,EAAE;AAA9B,OAAb,EAAiD;AAAEM,QAAAA,IAAI,EAAE;AAAR,OAAjD,CAAN;AACA,aAAOV,KAAK,CAACW,GAAN,CAAU,iBAAV,EACFC,IADE,CACG,UAAAC,GAAG,EAAI;AACT,YAAMC,OAAO,GAAGD,GAAG,CAACE,IAApB;AACAP,QAAAA,MAAM,CAAC,UAAD,EAAa;AAAEC,UAAAA,QAAQ,EAAE,SAAZ;AAAuBL,UAAAA,KAAK,EAAEU;AAA9B,SAAb,EAAsD;AAAEJ,UAAAA,IAAI,EAAE;AAAR,SAAtD,CAAN;AACA,eAAOP,KAAK,CAACC,KAAb;AACH,OALE,CAAP;AAMH,KATI;AAULY,IAAAA,eAVK,kCAU8BC,QAV9B,EAUwC;AAAA,UAA3Bd,KAA2B,SAA3BA,KAA2B;AAAA,UAApBK,MAAoB,SAApBA,MAAoB;AACzCA,MAAAA,MAAM,CAAC,SAAD,EAAY;AAAEC,QAAAA,QAAQ,EAAE,SAAZ;AAAuBJ,QAAAA,IAAI,EAAE;AAA7B,OAAZ,EAA+C;AAAEK,QAAAA,IAAI,EAAE;AAAR,OAA/C,CAAN;AACA,aAAOV,KAAK,CAACW,GAAN,2BAA6BM,QAA7B,GACFL,IADE,CACG,UAAAC,GAAG,EAAI;AACT,YAAMK,MAAM,GAAGL,GAAG,CAACE,IAAnB;AACAP,QAAAA,MAAM,CAAC,SAAD,EAAY;AAAEC,UAAAA,QAAQ,EAAE,SAAZ;AAAuBJ,UAAAA,IAAI,EAAEa;AAA7B,SAAZ,EAAmD;AAAER,UAAAA,IAAI,EAAE;AAAR,SAAnD,CAAN;AACA,eAAOP,KAAK,CAACE,IAAb;AACH,OALE,CAAP;AAMH,KAlBI;AAmBLc,IAAAA,YAnBK,+BAmBuBC,cAnBvB,EAmBuC;AAAA,UAA7BC,SAA6B,SAA7BA,SAA6B;AACxCD,MAAAA,cAAc,CAACE,aAAf,GAA+BD,SAAS,CAACE,IAAV,CAAeC,IAA9C;AACAJ,MAAAA,cAAc,CAACK,iBAAf,GAAmCL,cAAc,CAACM,QAAf,CAAwBC,WAAxB,GAAsCC,OAAtC,CAA8C,SAA9C,EAAyD,EAAzD,EAA6DC,IAA7D,EAAnC;AAEA,aAAO5B,aAAa,CAAC6B,IAAd,CAAmB,iBAAnB,EAAsCV,cAAtC,EACFR,IADE,CACG,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACE,IAAR;AAAA,OADN,CAAP;AAEH,KAzBI;AA0BLgB,IAAAA,UA1BK,6BA0B8Cd,QA1B9C,EA0BwD;AAAA,UAAhDd,KAAgD,SAAhDA,KAAgD;AAAA,UAAzCkB,SAAyC,SAAzCA,SAAyC;AAAA,UAA9Bb,MAA8B,SAA9BA,MAA8B;AAAA,UAAtBwB,QAAsB,SAAtBA,QAAsB;AACzD,UAAMR,IAAI,GAAGH,SAAS,CAACE,IAAV,CAAeC,IAA5B;AAEA,aAAOvB,aAAa,CAAC6B,IAAd,2BAAsCb,QAAtC,YACFL,IADE,CACG,YAAM;AACRoB,QAAAA,QAAQ,CAAC,0BAAD,EAA6Bf,QAA7B,EAAuC;AAAEP,UAAAA,IAAI,EAAE;AAAR,SAAvC,CAAR;AAEA,YAAMuB,YAAY,GAAG9B,KAAK,CAACE,IAAN,CAAW4B,YAAhC;AACAzB,QAAAA,MAAM,CAAC,kBAAD,+BAAyByB,YAAzB,IAAuCT,IAAvC,GAAN;AACA,eAAO,IAAP;AACH,OAPE,CAAP;AAQH,KArCI;AAsCLU,IAAAA,WAtCK,8BAsC+CjB,QAtC/C,EAsCyD;AAAA,UAAhDd,KAAgD,SAAhDA,KAAgD;AAAA,UAAzCkB,SAAyC,SAAzCA,SAAyC;AAAA,UAA9Bb,MAA8B,SAA9BA,MAA8B;AAAA,UAAtBwB,QAAsB,SAAtBA,QAAsB;AAC1D,UAAMR,IAAI,GAAGH,SAAS,CAACE,IAAV,CAAeC,IAA5B;AAEA,aAAOvB,aAAa,CAAC6B,IAAd,2BAAsCb,QAAtC,aACFL,IADE,CACG,YAAM;AACRoB,QAAAA,QAAQ,CAAC,+BAAD,EAAkCf,QAAlC,EAA4C;AAAEP,UAAAA,IAAI,EAAE;AAAR,SAA5C,CAAR;AAEA,YAAMuB,YAAY,GAAG9B,KAAK,CAACE,IAAN,CAAW4B,YAAhC;AACA,YAAME,KAAK,GAAGF,YAAY,CAACG,SAAb,CAAuB,UAAAC,KAAK;AAAA,iBAAIA,KAAK,CAACC,GAAN,KAAcd,IAAI,CAACc,GAAvB;AAAA,SAA5B,CAAd;AACAL,QAAAA,YAAY,CAACM,MAAb,CAAoBJ,KAApB,EAA2B,CAA3B;AACA3B,QAAAA,MAAM,CAAC,kBAAD,EAAqByB,YAArB,CAAN;AACH,OARE,CAAP;AASH;AAlDI,GARE;AA4DXO,EAAAA,SAAS,EAAE;AACPC,IAAAA,gBADO,4BACUtC,KADV,EACiB8B,YADjB,EAC+B;AAClClC,MAAAA,GAAG,CAAC2C,GAAJ,CAAQvC,KAAK,CAACE,IAAd,EAAoB,cAApB,EAAoC4B,YAApC;AACH;AAHM;AA5DA,CAAf","sourcesContent":["import Vue from 'vue'\nimport axios from 'axios'\nimport axiosInstance from '@/services/axios'\nexport default {\n    namespaced: true,\n\n    state: {\n        items: [],\n        item: {}\n    },\n\n    actions: {\n        fetchMeetups({ state, commit }) {\n            commit('setItems', { resource: 'meetups', items: [] }, { root: true })\n            return axios.get('/api/v1/meetups')\n                .then(res => {\n                    const meetups = res.data\n                    commit('setItems', { resource: 'meetups', items: meetups }, { root: true })\n                    return state.items\n                })\n        },\n        fetchMeetupById({ state, commit }, meetupId) {\n            commit('setItem', { resource: 'meetups', item: {} }, { root: true })\n            return axios.get(`/api/v1/meetups/${meetupId}`)\n                .then(res => {\n                    const meetup = res.data\n                    commit('setItem', { resource: 'meetups', item: meetup }, { root: true })\n                    return state.item\n                })\n        },\n        createMeetup({ rootState }, meetupToCreate) {\n            meetupToCreate.meetupCreator = rootState.auth.user\n            meetupToCreate.processedLocation = meetupToCreate.location.toLowerCase().replace(/[\\s,]+/g, '').trim()\n\n            return axiosInstance.post('/api/v1/meetups', meetupToCreate)\n                .then(res => res.data)\n        },\n        joinMeetup({ state, rootState, commit, dispatch }, meetupId) {\n            const user = rootState.auth.user\n\n            return axiosInstance.post(`/api/v1/meetups/${meetupId}/join`)\n                .then(() => {\n                    dispatch('auth/addMeetupToAuthUser', meetupId, { root: true })\n\n                    const joinedPeople = state.item.joinedPeople\n                    commit('addUsersToMeetup', [...joinedPeople, user])\n                    return true\n                })\n        },\n        leaveMeetup({ state, rootState, commit, dispatch }, meetupId) {\n            const user = rootState.auth.user\n\n            return axiosInstance.post(`/api/v1/meetups/${meetupId}/leave`)\n                .then(() => {\n                    dispatch('auth/removeMeetupFromAuthUser', meetupId, { root: true })\n\n                    const joinedPeople = state.item.joinedPeople\n                    const index = joinedPeople.findIndex(jUser => jUser._id === user._id)\n                    joinedPeople.splice(index, 1)\n                    commit('addUsersToMeetup', joinedPeople)\n                })\n        }\n    },\n    mutations: {\n        addUsersToMeetup(state, joinedPeople) {\n            Vue.set(state.item, 'joinedPeople', joinedPeople)\n        }\n    }\n}"]}]}