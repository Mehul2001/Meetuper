{"remainingRequest":"/Users/mehul/Meetuper/node_modules/babel-loader/lib/index.js!/Users/mehul/Meetuper/node_modules/eslint-loader/index.js??ref--13-0!/Users/mehul/Meetuper/src/store/modules/meetups.js","dependencies":[{"path":"/Users/mehul/Meetuper/src/store/modules/meetups.js","mtime":1555899876928},{"path":"/Users/mehul/Meetuper/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mehul/Meetuper/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mehul/Meetuper/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find-index\";\nimport _toConsumableArray from \"/Users/mehul/Meetuper/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport Vue from 'vue';\nimport axios from 'axios';\nimport axiosInstance from '@/services/axios';\nimport { applyFilters } from '@/helpers';\nexport default {\n  namespaced: true,\n  state: {\n    items: [],\n    item: {}\n  },\n  actions: {\n    fetchMeetups: function fetchMeetups(_ref) {\n      var state = _ref.state,\n          commit = _ref.commit;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      commit('setItems', {\n        resource: 'meetups',\n        items: []\n      }, {\n        root: true\n      });\n      var url = applyFilters('/api/v1/meetups', options.filter);\n      return axios.get(url).then(function (res) {\n        var meetups = res.data;\n        commit('setItems', {\n          resource: 'meetups',\n          items: meetups\n        }, {\n          root: true\n        });\n        return state.items;\n      });\n    },\n    fetchMeetupById: function fetchMeetupById(_ref2, meetupId) {\n      var state = _ref2.state,\n          commit = _ref2.commit;\n      commit('setItem', {\n        resource: 'meetups',\n        item: {}\n      }, {\n        root: true\n      });\n      return axios.get(\"/api/v1/meetups/\".concat(meetupId)).then(function (res) {\n        var meetup = res.data;\n        commit('setItem', {\n          resource: 'meetups',\n          item: meetup\n        }, {\n          root: true\n        });\n        return state.item;\n      });\n    },\n    createMeetup: function createMeetup(_ref3, meetupToCreate) {\n      var rootState = _ref3.rootState;\n      meetupToCreate.meetupCreator = rootState.auth.user;\n      meetupToCreate.processedLocation = meetupToCreate.location.toLowerCase().replace(/[\\s,]+/g, '').trim();\n      return axiosInstance.post('/api/v1/meetups', meetupToCreate).then(function (res) {\n        return res.data;\n      });\n    },\n    joinMeetup: function joinMeetup(_ref4, meetupId) {\n      var state = _ref4.state,\n          rootState = _ref4.rootState,\n          commit = _ref4.commit,\n          dispatch = _ref4.dispatch;\n      var user = rootState.auth.user;\n      return axiosInstance.post(\"/api/v1/meetups/\".concat(meetupId, \"/join\")).then(function () {\n        dispatch('auth/addMeetupToAuthUser', meetupId, {\n          root: true\n        });\n        var joinedPeople = state.item.joinedPeople;\n        commit('addUsersToMeetup', [].concat(_toConsumableArray(joinedPeople), [user]));\n        return true;\n      });\n    },\n    leaveMeetup: function leaveMeetup(_ref5, meetupId) {\n      var state = _ref5.state,\n          rootState = _ref5.rootState,\n          commit = _ref5.commit,\n          dispatch = _ref5.dispatch;\n      var user = rootState.auth.user;\n      return axiosInstance.post(\"/api/v1/meetups/\".concat(meetupId, \"/leave\")).then(function () {\n        dispatch('auth/removeMeetupFromAuthUser', meetupId, {\n          root: true\n        });\n        var joinedPeople = state.item.joinedPeople;\n        var index = joinedPeople.findIndex(function (jUser) {\n          return jUser._id === user._id;\n        });\n        joinedPeople.splice(index, 1);\n        commit('addUsersToMeetup', joinedPeople);\n      });\n    }\n  },\n  mutations: {\n    addUsersToMeetup: function addUsersToMeetup(state, joinedPeople) {\n      Vue.set(state.item, 'joinedPeople', joinedPeople);\n    }\n  }\n};",{"version":3,"sources":["/Users/mehul/Meetuper/src/store/modules/meetups.js"],"names":["Vue","axios","axiosInstance","applyFilters","namespaced","state","items","item","actions","fetchMeetups","commit","options","resource","root","url","filter","get","then","res","meetups","data","fetchMeetupById","meetupId","meetup","createMeetup","meetupToCreate","rootState","meetupCreator","auth","user","processedLocation","location","toLowerCase","replace","trim","post","joinMeetup","dispatch","joinedPeople","leaveMeetup","index","findIndex","jUser","_id","splice","mutations","addUsersToMeetup","set"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport axios from 'axios'\nimport axiosInstance from '@/services/axios'\nimport { applyFilters } from '@/helpers'\nexport default {\n    namespaced: true,\n\n    state: {\n        items: [],\n        item: {}\n    },\n\n    actions: {\n        fetchMeetups({ state, commit }, options = {}) {\n            commit('setItems', { resource: 'meetups', items: [] }, { root: true })\n            const url = applyFilters('/api/v1/meetups', options.filter)\n            return axios.get(url)\n                .then(res => {\n                    const meetups = res.data\n                    commit('setItems', { resource: 'meetups', items: meetups }, { root: true })\n                    return state.items\n                })\n        },\n        fetchMeetupById({ state, commit }, meetupId) {\n            commit('setItem', { resource: 'meetups', item: {} }, { root: true })\n            return axios.get(`/api/v1/meetups/${meetupId}`)\n                .then(res => {\n                    const meetup = res.data\n                    commit('setItem', { resource: 'meetups', item: meetup }, { root: true })\n                    return state.item\n                })\n        },\n        createMeetup({ rootState }, meetupToCreate) {\n            meetupToCreate.meetupCreator = rootState.auth.user\n            meetupToCreate.processedLocation = meetupToCreate.location.toLowerCase().replace(/[\\s,]+/g, '').trim()\n\n            return axiosInstance.post('/api/v1/meetups', meetupToCreate)\n                .then(res => res.data)\n        },\n        joinMeetup({ state, rootState, commit, dispatch }, meetupId) {\n            const user = rootState.auth.user\n\n            return axiosInstance.post(`/api/v1/meetups/${meetupId}/join`)\n                .then(() => {\n                    dispatch('auth/addMeetupToAuthUser', meetupId, { root: true })\n\n                    const joinedPeople = state.item.joinedPeople\n                    commit('addUsersToMeetup', [...joinedPeople, user])\n                    return true\n                })\n        },\n        leaveMeetup({ state, rootState, commit, dispatch }, meetupId) {\n            const user = rootState.auth.user\n\n            return axiosInstance.post(`/api/v1/meetups/${meetupId}/leave`)\n                .then(() => {\n                    dispatch('auth/removeMeetupFromAuthUser', meetupId, { root: true })\n\n                    const joinedPeople = state.item.joinedPeople\n                    const index = joinedPeople.findIndex(jUser => jUser._id === user._id)\n                    joinedPeople.splice(index, 1)\n                    commit('addUsersToMeetup', joinedPeople)\n                })\n        }\n    },\n    mutations: {\n        addUsersToMeetup(state, joinedPeople) {\n            Vue.set(state.item, 'joinedPeople', joinedPeople)\n        }\n    }\n}"]}]}