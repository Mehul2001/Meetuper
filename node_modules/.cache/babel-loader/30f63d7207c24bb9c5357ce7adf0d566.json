{"remainingRequest":"/Users/mehul/Meetuper/node_modules/babel-loader/lib/index.js!/Users/mehul/Meetuper/node_modules/eslint-loader/index.js??ref--13-0!/Users/mehul/Meetuper/src/store/modules/auth.js","dependencies":[{"path":"/Users/mehul/Meetuper/src/store/modules/auth.js","mtime":1555639552946},{"path":"/Users/mehul/Meetuper/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mehul/Meetuper/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mehul/Meetuper/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Promise from \"/Users/mehul/Meetuper/node_modules/@babel/runtime-corejs2/core-js/promise\";\nimport axios from 'axios';\nexport default {\n  namespaced: true,\n  state: {\n    user: null,\n    isAuthResolved: false\n  },\n  getters: {\n    authUser: function authUser(state) {\n      return state.user || null;\n    },\n    isAuthenticated: function isAuthenticated(state) {\n      return !!state.user;\n    }\n  },\n  actions: {\n    loginWithEmailAndPassword: function loginWithEmailAndPassword(_ref, userData) {\n      var commit = _ref.commit;\n      return axios.post('/api/v1/users/login', userData).then(function (res) {\n        var user = res.data;\n        commit('setAuthUser', user);\n      });\n    },\n    registerUser: function registerUser(context, userData) {\n      return axios.post('/api/v1/users/register', userData);\n    },\n    logout: function logout(_ref2) {\n      var commit = _ref2.commit;\n      return axios.post('/api/v1/users/logout').then(function () {\n        commit('setAuthUser', null);\n        return true;\n      }).catch(function (err) {\n        return err;\n      });\n    },\n    getAuthUser: function getAuthUser(_ref3) {\n      var commit = _ref3.commit,\n          getters = _ref3.getters;\n      var authUser = getters['authUser'];\n\n      if (authUser) {\n        return _Promise.resolve(authUser);\n      }\n\n      var config = {\n        headers: {\n          'Cache-Control': 'no-cache'\n        }\n      };\n      return axios.get('/api/v1/users/me', config).then(function (res) {\n        var user = res.data;\n        commit('setAuthUser', user);\n        commit('setAuthState', true);\n        return user;\n      }).catch(function (err) {\n        commit('setAuthUser', null);\n        commit('setAuthState', true);\n        return err;\n      });\n    }\n  },\n  mutations: {\n    setAuthUser: function setAuthUser(state, user) {\n      return state.user = user;\n    },\n    setAuthState: function setAuthState(state, authState) {\n      return state.isAuthResolved = authState;\n    }\n  }\n};",{"version":3,"sources":["/Users/mehul/Meetuper/src/store/modules/auth.js"],"names":["axios","namespaced","state","user","isAuthResolved","getters","authUser","isAuthenticated","actions","loginWithEmailAndPassword","userData","commit","post","then","res","data","registerUser","context","logout","catch","err","getAuthUser","resolve","config","headers","get","mutations","setAuthUser","setAuthState","authState"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,eAAe;AACXC,EAAAA,UAAU,EAAE,IADD;AAEXC,EAAAA,KAAK,EAAE;AACHC,IAAAA,IAAI,EAAE,IADH;AAEHC,IAAAA,cAAc,EAAE;AAFb,GAFI;AAMXC,EAAAA,OAAO,EAAE;AACLC,IAAAA,QADK,oBACIJ,KADJ,EACW;AACZ,aAAOA,KAAK,CAACC,IAAN,IAAc,IAArB;AACH,KAHI;AAILI,IAAAA,eAJK,2BAIWL,KAJX,EAIkB;AACnB,aAAO,CAAC,CAACA,KAAK,CAACC,IAAf;AACH;AANI,GANE;AAcXK,EAAAA,OAAO,EAAE;AACLC,IAAAA,yBADK,2CACiCC,QADjC,EAC2C;AAAA,UAApBC,MAAoB,QAApBA,MAAoB;AAC5C,aAAOX,KAAK,CAACY,IAAN,CAAW,qBAAX,EAAkCF,QAAlC,EACFG,IADE,CACG,UAAAC,GAAG,EAAI;AACT,YAAMX,IAAI,GAAGW,GAAG,CAACC,IAAjB;AACAJ,QAAAA,MAAM,CAAC,aAAD,EAAgBR,IAAhB,CAAN;AACH,OAJE,CAAP;AAKH,KAPI;AAQLa,IAAAA,YARK,wBAQQC,OARR,EAQiBP,QARjB,EAQ2B;AAC5B,aAAOV,KAAK,CAACY,IAAN,CAAW,wBAAX,EAAqCF,QAArC,CAAP;AACH,KAVI;AAWLQ,IAAAA,MAXK,yBAWc;AAAA,UAAVP,MAAU,SAAVA,MAAU;AACf,aAAOX,KAAK,CAACY,IAAN,CAAW,sBAAX,EACFC,IADE,CACG,YAAM;AACRF,QAAAA,MAAM,CAAC,aAAD,EAAgB,IAAhB,CAAN;AACA,eAAO,IAAP;AACH,OAJE,EAKFQ,KALE,CAKI,UAAAC,GAAG,EAAI;AACV,eAAOA,GAAP;AACH,OAPE,CAAP;AAQH,KApBI;AAqBLC,IAAAA,WArBK,8BAqB4B;AAAA,UAAnBV,MAAmB,SAAnBA,MAAmB;AAAA,UAAXN,OAAW,SAAXA,OAAW;AAC7B,UAAMC,QAAQ,GAAGD,OAAO,CAAC,UAAD,CAAxB;;AACA,UAAIC,QAAJ,EAAc;AAAE,eAAO,SAAQgB,OAAR,CAAgBhB,QAAhB,CAAP;AAAkC;;AAClD,UAAMiB,MAAM,GAAG;AACXC,QAAAA,OAAO,EAAE;AACL,2BAAiB;AADZ;AADE,OAAf;AAMA,aAAOxB,KAAK,CAACyB,GAAN,CAAU,kBAAV,EAA8BF,MAA9B,EACFV,IADE,CACG,UAACC,GAAD,EAAS;AACX,YAAMX,IAAI,GAAGW,GAAG,CAACC,IAAjB;AACAJ,QAAAA,MAAM,CAAC,aAAD,EAAgBR,IAAhB,CAAN;AACAQ,QAAAA,MAAM,CAAC,cAAD,EAAiB,IAAjB,CAAN;AACA,eAAOR,IAAP;AACH,OANE,EAOFgB,KAPE,CAOI,UAAAC,GAAG,EAAI;AACVT,QAAAA,MAAM,CAAC,aAAD,EAAgB,IAAhB,CAAN;AACAA,QAAAA,MAAM,CAAC,cAAD,EAAiB,IAAjB,CAAN;AACA,eAAOS,GAAP;AACH,OAXE,CAAP;AAYH;AA1CI,GAdE;AA0DXM,EAAAA,SAAS,EAAE;AACPC,IAAAA,WADO,uBACKzB,KADL,EACYC,IADZ,EACkB;AACrB,aAAOD,KAAK,CAACC,IAAN,GAAaA,IAApB;AACH,KAHM;AAIPyB,IAAAA,YAJO,wBAIM1B,KAJN,EAIa2B,SAJb,EAIwB;AAC3B,aAAO3B,KAAK,CAACE,cAAN,GAAuByB,SAA9B;AACH;AANM;AA1DA,CAAf","sourcesContent":["import axios from 'axios'\nexport default {\n    namespaced: true,\n    state: {\n        user: null,\n        isAuthResolved: false\n    },\n    getters: {\n        authUser(state) {\n            return state.user || null\n        },\n        isAuthenticated(state) {\n            return !!state.user\n        }\n    },\n    actions: {\n        loginWithEmailAndPassword({ commit }, userData) {\n            return axios.post('/api/v1/users/login', userData)\n                .then(res => {\n                    const user = res.data\n                    commit('setAuthUser', user)\n                })\n        },\n        registerUser(context, userData) {\n            return axios.post('/api/v1/users/register', userData)\n        },\n        logout({ commit }) {\n            return axios.post('/api/v1/users/logout')\n                .then(() => {\n                    commit('setAuthUser', null)\n                    return true\n                })\n                .catch(err => {\n                    return err\n                })\n        },\n        getAuthUser({ commit, getters }) {\n            const authUser = getters['authUser']\n            if (authUser) { return Promise.resolve(authUser) }\n            const config = {\n                headers: {\n                    'Cache-Control': 'no-cache'\n                }\n            }\n\n            return axios.get('/api/v1/users/me', config)\n                .then((res) => {\n                    const user = res.data\n                    commit('setAuthUser', user)\n                    commit('setAuthState', true)\n                    return user\n                })\n                .catch(err => {\n                    commit('setAuthUser', null)\n                    commit('setAuthState', true)\n                    return err\n                })\n        }\n    },\n    mutations: {\n        setAuthUser(state, user) {\n            return state.user = user\n        },\n        setAuthState(state, authState) {\n            return state.isAuthResolved = authState\n        }\n    }\n}"]}]}