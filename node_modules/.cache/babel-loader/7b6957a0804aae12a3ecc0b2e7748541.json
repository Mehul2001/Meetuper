{"remainingRequest":"/Users/mehul/Meetuper/node_modules/babel-loader/lib/index.js!/Users/mehul/Meetuper/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mehul/Meetuper/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mehul/Meetuper/src/pages/PageMeetupDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mehul/Meetuper/src/pages/PageMeetupDetail.vue","mtime":1555812389001},{"path":"/Users/mehul/Meetuper/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mehul/Meetuper/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mehul/Meetuper/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mehul/Meetuper/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.sort\";\nimport _toConsumableArray from \"/Users/mehul/Meetuper/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/mehul/Meetuper/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapActions, mapState } from 'vuex';\nimport ThreadCreateModal from '@/components/ThreadCreateModal';\nimport ThreadList from '@/components/ThreadList';\nexport default {\n  components: {\n    ThreadCreateModal: ThreadCreateModal,\n    ThreadList: ThreadList\n  },\n  computed: _objectSpread({}, mapState({\n    meetup: function meetup(state) {\n      return state.meetups.item;\n    },\n    threads: function threads(state) {\n      return state.threads.items;\n    },\n    authUser: function authUser(state) {\n      return state.auth.user;\n    }\n  }), {\n    meetupCreator: function meetupCreator() {\n      return this.meetup.meetupCreator || {};\n    },\n    isAuthenticated: function isAuthenticated() {\n      return this.$store.getters['auth/isAuthenticated'];\n    },\n    isMeetupOwner: function isMeetupOwner() {\n      return this.$store.getters['auth/isMeetupOwner'](this.meetupCreator._id);\n    },\n    isMember: function isMember() {\n      return this.$store.getters['auth/isMember'](this.meetup._id);\n    },\n    canJoin: function canJoin() {\n      return !this.isMeetupOwner && this.isAuthenticated && !this.isMember;\n    },\n    canMakePost: function canMakePost() {\n      return this.isAuthenticated && (this.isMember || this.isMeetupOwner);\n    },\n    orderedThreads: function orderedThreads() {\n      var copyOfThreads = _toConsumableArray(this.threads);\n\n      return copyOfThreads.sort(function (thread, nextThread) {\n        return new Date(nextThread.createdAt) - new Date(thread.createdAt);\n      });\n    }\n  }),\n  created: function created() {\n    var meetupId = this.$route.params.id;\n    this.fetchMeetupById(meetupId);\n    this.fetchThreads(meetupId);\n\n    if (this.isAuthenticated) {\n      this.$socket.emit('meetup/subscribe', meetupId);\n      this.$socket.on('meetup/postPublished', this.addPostToThreadHandler);\n    }\n  },\n  destroyed: function destroyed() {\n    this.$socket.removeListener('meetup/postPublished', this.addPostToThreadHandler);\n    this.$socket.emit('meetup/unsubscribe', this.meetup._id);\n  },\n  methods: _objectSpread({}, mapActions('meetups', ['fetchMeetupById']), mapActions('threads', ['fetchThreads', 'postThread', 'addPostToThread']), {\n    addPostToThreadHandler: function addPostToThreadHandler(post) {\n      this.addPostToThread({\n        post: post,\n        threadId: post.thread\n      });\n    },\n    joinMeetup: function joinMeetup() {\n      this.$store.dispatch('meetups/joinMeetup', this.meetup._id);\n    },\n    leaveMeetup: function leaveMeetup() {\n      this.$store.dispatch('meetups/leaveMeetup', this.meetup._id);\n    },\n    createThread: function createThread(_ref) {\n      var _this = this;\n\n      var title = _ref.title,\n          done = _ref.done;\n      this.postThread({\n        title: title,\n        meetupId: this.meetup._id\n      }).then(function () {\n        _this.$toasted.success('Thread Succesfuly Created!', {\n          duration: 3000\n        });\n\n        done();\n      });\n    }\n  })\n};",{"version":3,"sources":["PageMeetupDetail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"meetup-detail-page\">\n    <section class=\"hero\">\n      <div class=\"hero-body\">\n        <div class=\"container\">\n          <h2 class=\"subtitle\">\n            {{meetup.startDate | formatDate}}\n          </h2>\n          <h1 class=\"title\">\n            {{meetup.title}}\n          </h1>\n          <article class=\"media v-center\">\n            <figure class=\"media-left\">\n              <p class=\"image is-64x64\">\n                <img class=\"is-rounded\" :src=\"meetupCreator.avatar\">\n              </p>\n            </figure>\n            <div class=\"media-content\">\n              <div class=\"content\">\n                <p>\n                  Created by <strong>{{meetupCreator.name}}</strong>\n                </p>\n              </div>\n            </div>\n          </article>\n        </div>\n        <div class=\"is-pulled-right\">\n         <button v-if=\"isMember\"\n\t                  @click=\"leaveMeetup\"\n\t                  class=\"button is-danger\">Leave Meetup</button>\n        </div>\n      </div>\n    </section>\n    <section class=\"section\">\n      <div class=\"container\">\n        <div class=\"columns\">\n          <div class=\"column is-3\">\n            <aside class=\"is-medium menu\">\n              <div class=\"meetup-side-box\">\n                <div class=\"meetup-side-box-date m-b-sm\">\n                  <p><b>Date</b></p>\n                  <p>{{meetup.startDate | formatDate}}</p>\n                </div>\n                <div class=\"meetup-side-box-date m-b-sm\">\n                  <p><b>Time</b></p>\n                  <span>{{meetup.timeFrom}}</span> - <span>{{meetup.timeTo}}</span>\n                </div>\n                <div class=\"meetup-side-box-place m-b-sm\">\n                  <p><b>How to find us</b></p>\n                  <p>{{meetup.location}}</p>\n                </div>\n                <div class=\"meetup-side-box-more-info\">\n                  <p><b>Additional Info</b></p>\n                  <p>{{meetup.shortInfo}}</p>\n                </div>\n              </div>\n              <div class=\"meetup-side-box-map\">\n                <img src=\"https://cnet2.cbsistatic.com/img/H_zPLL8-QTZOLxJvgHQ1Jkz0EgY=/830x467/2013/07/10/f0bcef02-67c2-11e3-a665-14feb5ca9861/maps_routemap.png\" class=\"venueMap-mapImg span--100\" alt=\"Location image of meetup venue\">\n              </div>\n              <!-- Threads Start -->\n              <p class=\"menu-label\">\n                Threads\n              </p>\n              <ul>\n                <li v-for=\"thread in orderedThreads\" :key=\"thread._id\">{{thread.title}}</li>\n              </ul>\n              <p class=\"menu-label\">\n                Who is Going\n              </p>\n              <div class=\"columns is-multiline is-mobile\">\n                <!-- Joined People Images Here -->\n                <div v-for=\"person in meetup.joinedPeople\" :key=\"person._id\" class=\"column is-3\">\n                  <figure class=\"image is-64x64\">\n                    <img class=\"is-rounded\" :src=\"person.avatar\" alt=\"Image\">\n                  </figure>\n                </div>\n              </div>\n              <!-- Threads Ends -->\n            </aside>\n          </div>\n          <div class=\"column is-7 is-offset-1\">\n            <div class=\"content is-medium\">\n              <h3 class=\"title is-3\">About the Meetup</h3>\n              <p>{{meetup.description}}</p>\n             <button v-if=\"canJoin\"\n\t                      @click=\"joinMeetup\"\n\t                      class=\"button is-primary\">Join In</button>\n\t              <button v-if=\"!isAuthenticated\"\n\t                      :disabled=\"true\"\n\t                      class=\"button is-warning\">You need authenticate in order to join</button>\n                        <ThreadCreateModal v-if=\"isMember || isMeetupOwner\"\n                                  @threadSubmitted=\"createThread\"\n\t                                 :btnTitle=\"`Welcome ${authUser.username}, Start a new thread`\"\n\t                                 :title=\"'Create Thread'\" />\n            </div>\n            <ThreadList :threads=\"orderedThreads\"\n\t                      :canMakePost=\"canMakePost\" />\n          </div>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapState } from 'vuex'\n  import ThreadCreateModal from '@/components/ThreadCreateModal'\n  import ThreadList from '@/components/ThreadList'\n  export default {\n    components: {\n\t      ThreadCreateModal,\n        ThreadList\n\t    },\n    computed: {\n\t      ...mapState({\n\t        meetup: state => state.meetups.item,\n\t        threads: state => state.threads.items,\n          authUser: state => state.auth.user\n\t      }),\n\t      meetupCreator () {\n\t        return this.meetup.meetupCreator || {}\n            },\n\t      isAuthenticated () {\n\t        return this.$store.getters['auth/isAuthenticated']\n\t      },\n\t      isMeetupOwner () {\n\t        return this.$store.getters['auth/isMeetupOwner'](this.meetupCreator._id)\n\t      },\n\t      isMember () {\n\t        return this.$store.getters['auth/isMember'](this.meetup._id)\n\t      },\n\t      canJoin () {\n\t        return !this.isMeetupOwner &&\n\t                this.isAuthenticated &&\n\t               !this.isMember\n                 },\n        canMakePost () {\n\t        return this.isAuthenticated && (this.isMember || this.isMeetupOwner)\n\t      },\n\t      orderedThreads () {\n\t        const copyOfThreads = [...this.threads]\n\t        return copyOfThreads.sort((thread, nextThread) => {\n\t          return new Date(nextThread.createdAt) - new Date(thread.createdAt)\n\t        })\n      }\n    },\n    created () {\n      const meetupId = this.$route.params.id\n       this.fetchMeetupById(meetupId)\n\t      this.fetchThreads(meetupId)\n         if (this.isAuthenticated) {\n\t        this.$socket.emit('meetup/subscribe', meetupId)\n\t        this.$socket.on('meetup/postPublished', this.addPostToThreadHandler)\n\t      }\n\t    },\n\t    destroyed () {\n\t      this.$socket.removeListener('meetup/postPublished', this.addPostToThreadHandler)\n\t      this.$socket.emit('meetup/unsubscribe', this.meetup._id)\n\t    },\n\t    methods: {\n\t      ...mapActions('meetups', ['fetchMeetupById']),\n\t      ...mapActions('threads', ['fetchThreads', 'postThread', 'addPostToThread']),\n        addPostToThreadHandler (post) {\n\t        this.addPostToThread({post, threadId: post.thread})\n\t      },\n\t      joinMeetup () {\n\t        this.$store.dispatch('meetups/joinMeetup', this.meetup._id)\n           },\n\t      leaveMeetup () {\n\t        this.$store.dispatch('meetups/leaveMeetup', this.meetup._id)\n          },\n\t      createThread ({title, done}) {\n\t        this.postThread({title, meetupId: this.meetup._id})\n\t        .then(() => {\n\t            this.$toasted.success('Thread Succesfuly Created!', {duration: 3000})\n\t            done()\n\t        })\n\t      }\n    }\n  }\n</script>\n\n<style scoped lang=\"scss\">\n  .tag.is-warning {\n    opacity: 0.5;\n  }\n  .meetup-detail-page {\n    background-color: #f5f5f5;\n    .mapouter{text-align:right;height:500px;width:600px;}.gmap_canvas {overflow:hidden;background:none!important;height:500px;width:600px;}\n    .hero-body {\n      background-color: white;\n      border: 1px solid rgba(46,62,72,.12);\n      color: white;\n      background-image: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url('https://images.unsplash.com/photo-1531263060782-b024de9b9793?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1650&q=80');\n      background-size: cover;\n      background-repeat: no-repeat;\n      background-attachment: fixed;\n        > p,h1,h2, strong {\n          color: white;\n        }\n      }\n    .meetup-side-box {\n      background-color: white;\n      border-radius: 10px;\n      font-size: 16px;\n      padding: 15px;\n    }\n  }\n  pre,\n  .message {\n    max-width: 960px;\n  }\n  .v-center {\n    align-items: center;\n  }\n  li {margin: 10px}\n  .hero.is-primary {\n  background: linear-gradient(to top right, #524ad0 10%, #D099FA);\n  }\n  .box {\n    box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2);\n  }\n  .box span.icon {\n    float: right;\n    font-size: 1.7em;\n    padding: 2rem 2rem 0 0;\n  }\n  .is-large.fab {\n    font-size: 7em;\n  }\n  .is-large.fas {\n    font-size: 5em;\n    margin-left: 0.2em;\n  }\n  .media-content {overflow: hidden;}\n  .menu-list li a:hover {\n    background: #d9d9d9;\n  }\n  .token.number {\n    display: inline;\n    padding: inherit;\n    font-size: inherit;\n    line-height: inherit;\n    text-align: inherit;\n    vertical-align: inherit;\n    border-radius: inherit;\n    font-weight: inherit;\n    white-space: inherit;\n    background: inherit;\n    margin: inherit;\n  }\n  .footer {background-color: white;}\n</style>"],"sourceRoot":"src/pages"}]}